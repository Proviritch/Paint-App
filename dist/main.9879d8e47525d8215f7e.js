(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.d({},{$_:()=>ve,SP:()=>re,Y9:()=>ee,PS:()=>ke,sx:()=>ne});var o=document.getElementById("draws_displayed").getContext("2d"),i=(document.getElementById("playground"),["pencil"]),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,a,l;return n=e,a=[{key:"draw",value:function(e,t){o.lineWidth=ke,o.strokeStyle=ve,o.lineCap="round",i.push({x:e-re.offsetWidth,y:t-ne.offsetHeight,strokeStyle:ve,lineWidth:ke}),o.lineTo(e-re.offsetWidth,t-ne.offsetHeight),o.stroke(),o.beginPath(),o.moveTo(e-re.offsetWidth,t-ne.offsetHeight)}},{key:"drawEnd",value:function(){ee.push(t(i)),i=["pencil"],o.closePath()}},{key:"drawStart",value:function(e,t){o.beginPath()}},{key:"drawCtrlZ",value:function(e){o.beginPath();for(var t=0;t<ee[e].length;t++)o.lineWidth=ee[e][t].lineWidth,o.strokeStyle=ee[e][t].strokeStyle,o.lineCap="round",o.lineTo(ee[e][t].x,ee[e][t].y),o.stroke(),o.beginPath(),o.moveTo(ee[e][t].x,ee[e][t].y);o.closePath()}}],a&&r(n.prototype,a),l&&r(n,l),Object.defineProperty(n,"prototype",{writable:!1}),e}();function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d,f,s,h,y=document.getElementById("draws_displayed"),g=y.getContext("2d"),m=document.getElementById("playground").getContext("2d"),p=["rectangle"],v=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.width=r,this.height=o}var t,n,r;return t=e,n=[{key:"draw",value:function(e,t){s=e-re.offsetWidth-d,h=t-ne.offsetHeight-f,m.beginPath(),m.lineWidth=ke,m.strokeStyle=ve,m.clearRect(0,0,y.width,y.height),m.rect(d,f,s,h),m.stroke()}},{key:"drawEnd",value:function(){m.clearRect(0,0,y.width,y.height),g.beginPath(),g.lineWidth=ke,g.strokeStyle=ve,g.rect(d,f,s,h),g.stroke(),p.push({x:d,y:f,width:s,height:h,strokeStyle:ve,lineWidth:ke}),ee.push(l(p)),p=["rectangle"]}},{key:"drawStart",value:function(e,t){d=e-re.offsetWidth,f=t-ne.offsetHeight}},{key:"drawCtrlZ",value:function(e){g.beginPath(),g.lineWidth=ee[e][1].lineWidth,g.strokeStyle=ee[e][1].strokeStyle,g.rect(ee[e][1].x,ee[e][1].y,ee[e][1].width,ee[e][1].height),ee[e][1].fillStyle&&(g.fillStyle=ee[e][1].fillStyle,g.fill()),g.stroke(),g.closePath()}},{key:"fillColor",value:function(){ee[ee.length-1][1].fillStyle=ve,g.fillStyle=ve,g.fill(),g.stroke()}}],n&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S,E,I,P,C=document.getElementById("draws_displayed"),T=C.getContext("2d"),A=document.getElementById("playground").getContext("2d"),j=["circle"],W=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.radiusX=r,this.radiusY=o}var t,n,r;return t=e,n=[{key:"draw",value:function(e,t){I=Math.abs(e-re.offsetWidth-S),P=Math.abs(t-ne.offsetHeight-E),A.beginPath(),A.strokeStyle=ve,A.lineWidth=ke,A.clearRect(0,0,C.width,C.height),A.ellipse(S,E,I,P,0,0,2*Math.PI,!1),A.stroke()}},{key:"drawEnd",value:function(){A.clearRect(0,0,C.width,C.height),T.beginPath(),T.lineWidth=ke,T.strokeStyle=ve,T.ellipse(S,E,I,P,0,0,2*Math.PI,!1),T.stroke(),j.push({x:S,y:E,radiusX:I,radiusY:P,strokeStyle:ve,lineWidth:ke}),ee.push(b(j)),j=["circle"]}},{key:"drawStart",value:function(e,t){S=e-re.offsetWidth,E=t-ne.offsetHeight}},{key:"drawCtrlZ",value:function(e){T.beginPath(),T.lineWidth=ee[e][1].lineWidth,T.strokeStyle=ee[e][1].strokeStyle,T.ellipse(ee[e][1].x,ee[e][1].y,ee[e][1].radiusX,ee[e][1].radiusY,0,0,2*Math.PI,!1),ee[e][1].fillStyle&&(T.fillStyle=ee[e][1].fillStyle,T.fill()),T.stroke(),T.closePath()}},{key:"fillColor",value:function(){ee[ee.length-1][1].fillStyle=ve,T.fillStyle=ve,T.fill(),T.stroke()}}],n&&k(t.prototype,n),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var X,B,R,H,_=document.getElementById("draws_displayed"),M=_.getContext("2d"),U=document.getElementById("playground").getContext("2d"),Y=["rectLine"],Z=!1,F=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.xI=t,this.yI=n,this.xF=r,this.yF=o}var t,n,r;return t=e,n=[{key:"draw",value:function(e,t){Z=!0,B=e-re.offsetWidth,H=t-ne.offsetHeight,U.clearRect(0,0,_.width,_.height),U.beginPath(),U.lineCap="round",U.strokeStyle=ve,U.lineWidth=ke,U.moveTo(X,R),U.lineTo(B,H),U.stroke()}},{key:"drawEnd",value:function(){Z&&(Z=!1,U.clearRect(0,0,_.width,_.height),M.beginPath(),M.lineCap="round",M.strokeStyle=ve,M.lineWidth=ke,M.moveTo(X,R),M.lineTo(B,H),M.stroke(),M.closePath(),Y.push({xI:X,yI:R,xF:B,yF:H,strokeStyle:ve,lineWidth:ke}),ee.push(x(Y)),Y=["rectLine"])}},{key:"drawStart",value:function(e,t){X=e-re.offsetWidth,R=t-ne.offsetHeight}},{key:"drawCtrlZ",value:function(e){M.beginPath(),M.lineCap="round",M.lineWidth=ee[e][1].lineWidth,M.strokeStyle=ee[e][1].strokeStyle,M.moveTo(ee[e][1].xI,ee[e][1].yI),M.lineTo(ee[e][1].xF,ee[e][1].yF),M.stroke(),M.closePath()}}],n&&L(t.prototype,n),r&&L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V,z,D=document.getElementById("draws_displayed").getContext("2d"),G=["eraser"],J=[],K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"draw",value:function(e,t){V=e-re.offsetWidth-25,z=t-ne.offsetHeight-25,D.clearRect(V,z,50,50),J.push({x:V,y:z,width:50,height:50})}},{key:"drawEnd",value:function(){D.beginPath(),G.push($(J)),ee.push($(G)),J=[],G=["eraser"]}},{key:"drawStart",value:function(e,t){}},{key:"drawCtrlZ",value:function(e){for(var t=0;t<ee[e][1].length;t++)D.clearRect(ee[e][1][t].x,ee[e][1][t].y,50,50)}}],n&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}for(var ee=[],te=document.querySelector(".colorSection"),ne=document.querySelector(".moreToolsSection"),re=document.querySelector(".drawToolsSection"),oe=document.getElementsByTagName("canvas"),ie=0;ie<oe.length;ie++)oe[ie].width=window.innerWidth-re.offsetWidth,oe[ie].height=window.innerHeight-te.offsetHeight-ne.offsetHeight;var ae,le=document.getElementById("playground"),ce=[new a,new v,new W,new F,new K],ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.strategy=t}var t,n,r;return t=e,n=[{key:"changeStrategy",value:function(e){this.strategy=e}},{key:"draw",value:function(e,t){return this.strategy.draw(e,t)}},{key:"drawEnd",value:function(){return this.strategy.drawEnd()}},{key:"drawStart",value:function(e,t){return this.strategy.drawStart(e,t)}},{key:"drawCtrlZ",value:function(e){return this.strategy.drawCtrlZ(e)}},{key:"fillColor",value:function(){return this.strategy.fillColor()}}],n&&Q(t.prototype,n),r&&Q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),de=new ue,fe=!1;re.addEventListener("click",(function(e){e.target.parentElement.hasAttribute("value")&&(de.changeStrategy(ce[e.target.parentElement.attributes[0].nodeValue]),ae=ce[e.target.parentElement.attributes[0].nodeValue])})),le.addEventListener("touchstart",(function(e){fe=!1,de.drawStart(e.changedTouches[0].clientX,e.changedTouches[0].clientY)})),le.addEventListener("touchmove",(function(e){de.draw(e.changedTouches[0].clientX,e.changedTouches[0].clientY)})),le.addEventListener("touchend",(function(){de.drawEnd()}));var se=function(e){de.draw(e.clientX,e.clientY)};le.addEventListener("mousedown",(function(e){fe=!1,de.drawStart(e.clientX,e.clientY),le.addEventListener("mousemove",se)})),le.addEventListener("mouseup",(function(e){de.drawEnd(),le.removeEventListener("mousemove",se)}));var he=document.getElementById("ctrlZ"),ye=[["pencil",new a],["rectangle",new v],["circle",new W],["rectLine",new F],["eraser",new K]],ge=document.getElementById("draws_displayed"),me=ge.getContext("2d");he.addEventListener("click",(function(e){ee.pop(),me.clearRect(0,0,ge.width,ge.height),fe=!0;for(var t=0;t<ee.length;t++)for(var n=0;n<ye.length;n++)ee[t][0]===ye[n][0]&&(de.changeStrategy(ye[n][1]),de.drawCtrlZ(t));de.changeStrategy(ae)}));var pe={black:"black",gray:"gray",white:"white",crimson:"crimson",red:"red",orangered:"orangered",orange:"orange",gold:"gold",yellow:"yellow",lime:"lime",limegreen:"limegreen",green:"green",springgreen:"springgreen",cyan:"cyan",deepskyblue:"deepskyblue",blue:"blue",mediumslateblue:"mediumslateblue",magenta:"magenta",hotpink:"hotpink",lightgoldenrodyellow:"lightgoldenrodyellow",lightsalmon:"lightsalmon",midnightblue:"midnightblue",olive:"olive",navajowhite:"navajowhite",peru:"peru",seagreen:"seagreen",thistle:"thistle"},ve=pe.black;te.addEventListener("click",(function(e){"color"===e.target.className&&(ve=pe[e.target.id])}));var be=document.getElementById("slide_bar");be.width=100,be.height=20;var we=be.getContext("2d"),ke=10,Se=function(e){we.clearRect(0,0,be.offsetWidth,be.offsetHeight),we.lineCap="round",we.lineWidth=5,we.moveTo(5,be.height/2),we.lineTo(e,be.height/2),we.stroke(),we.beginPath(),we.ellipse(e,be.height/2,10,10,0,2*Math.PI,!1),we.fill(),we.beginPath()};Se(be.width/2),be.addEventListener("touchstart",(function(e){e.changedTouches[0].clientX-40<90&&e.changedTouches[0].clientX-40>10&&(Se(e.changedTouches[0].clientX-40),ke=(e.changedTouches[0].clientX-40)/5)})),be.addEventListener("touchmove",(function(e){e.changedTouches[0].clientX-40<90&&e.changedTouches[0].clientX-40>10&&Se(e.changedTouches[0].clientX-40),(ke=(e.changedTouches[0].clientX-40)/5)>20?ke=20:ke<0&&(ke=1)}));var Ee=function(e){e.clientX-40<90&&e.clientX-40>10&&Se(e.clientX-40),(ke=(e.clientX-40)/5)>20?ke=20:ke<0&&(ke=1)};be.addEventListener("mousedown",(function(e){e.clientX-40<90&&e.clientY-40>10&&(Se(e.clientX-40),ke=(e.clientX-40)/5),be.addEventListener("mousemove",Ee)})),be.addEventListener("mouseup",(function(){be.removeEventListener("mousemove",Ee)}));var Ie=document.getElementById("fill");Ie.addEventListener("click",(function(e){"rectangle"!==ee[ee.length-1][0]&&"circle"!==ee[ee.length-1][0]||fe||(!0,de.fillColor())}));var Pe,Ce=document.getElementById("fill_background"),Te=document.getElementById("canvas_background"),Ae=Te.getContext("2d"),je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"white";Ae.clearRect(0,0,Te.width,Te.height),Ae.fillStyle=e,Pe=e,Ae.rect(0,0,Te.width,Te.height),Ae.fill()};je(),Ce.addEventListener("click",(function(e){je(ve)}));var We=document.getElementById("button_download"),xe=document.getElementById("link_download");We.addEventListener("click",(function(){var e=new Image;ge.toBlob((function(t){var n=URL.createObjectURL(t);e.src=n,e.onload=function(){Ae.drawImage(e,0,0,Te.width,Te.height),Te.toBlob((function(e){var t=URL.createObjectURL(e);xe.href=t,xe.click(),Ae.clearRect(0,0,Te.width,Te.height),je(Pe)}))}}))}))})();